<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: rsp.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">rsp.h File Reference<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a> &raquo; <a class="el" href="group__lowlevel.html">Low Level Hardware Interfaces</a> &raquo; <a class="el" href="group__rsp.html">RSP interface</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Low-level RSP hardware library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="rsp_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structrsp__snapshot__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#structrsp__snapshot__t">rsp_snapshot_t</a></td></tr>
<tr class="memdesc:structrsp__snapshot__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Snapshot of the register status of the RSP.  <a href="rsp_8h.html#structrsp__snapshot__t">More...</a><br /></td></tr>
<tr class="separator:structrsp__snapshot__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrsp__ucode__t.html">rsp_ucode_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">RSP ucode definition.  <a href="structrsp__ucode__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af2eae5f6aa7c8ebae3255e00fa7fb23d"><td class="memItemLeft" align="right" valign="top"><a id="af2eae5f6aa7c8ebae3255e00fa7fb23d" name="af2eae5f6aa7c8ebae3255e00fa7fb23d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_DMEM</b>&#160;&#160;&#160;((volatile uint32_t*)0xA4000000)</td></tr>
<tr class="memdesc:af2eae5f6aa7c8ebae3255e00fa7fb23d"><td class="mdescLeft">&#160;</td><td class="mdescRight">RSP DMEM: 4K of data memory. <br /></td></tr>
<tr class="separator:af2eae5f6aa7c8ebae3255e00fa7fb23d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a033c8149bed074df536e347a6b1f1fb1"><td class="memItemLeft" align="right" valign="top"><a id="a033c8149bed074df536e347a6b1f1fb1" name="a033c8149bed074df536e347a6b1f1fb1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_IMEM</b>&#160;&#160;&#160;((volatile uint32_t*)0xA4001000)</td></tr>
<tr class="memdesc:a033c8149bed074df536e347a6b1f1fb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">RSP IMEM: 4K of instruction memory. <br /></td></tr>
<tr class="separator:a033c8149bed074df536e347a6b1f1fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5afa1f4377704f9a317bde9ffc6eac0"><td class="memItemLeft" align="right" valign="top"><a id="ae5afa1f4377704f9a317bde9ffc6eac0" name="ae5afa1f4377704f9a317bde9ffc6eac0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_PC</b>&#160;&#160;&#160;((volatile uint32_t*)0xA4080000)</td></tr>
<tr class="memdesc:ae5afa1f4377704f9a317bde9ffc6eac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current SP program counter. <br /></td></tr>
<tr class="separator:ae5afa1f4377704f9a317bde9ffc6eac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7ef6177f79ef5225e5c9cebaa023c2"><td class="memItemLeft" align="right" valign="top"><a id="afb7ef6177f79ef5225e5c9cebaa023c2" name="afb7ef6177f79ef5225e5c9cebaa023c2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS</b>&#160;&#160;&#160;((volatile uint32_t*)0xA4040010)</td></tr>
<tr class="memdesc:afb7ef6177f79ef5225e5c9cebaa023c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP status register. <br /></td></tr>
<tr class="separator:afb7ef6177f79ef5225e5c9cebaa023c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace972110dc97b63b7133719a78ff1dc9"><td class="memItemLeft" align="right" valign="top"><a id="ace972110dc97b63b7133719a78ff1dc9" name="ace972110dc97b63b7133719a78ff1dc9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_DMA_FULL</b>&#160;&#160;&#160;((volatile uint32_t*)0xA4040014)</td></tr>
<tr class="memdesc:ace972110dc97b63b7133719a78ff1dc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP DMA full register. <br /></td></tr>
<tr class="separator:ace972110dc97b63b7133719a78ff1dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a76ea26fcea40d918ae9143c2d13ac1"><td class="memItemLeft" align="right" valign="top"><a id="a6a76ea26fcea40d918ae9143c2d13ac1" name="a6a76ea26fcea40d918ae9143c2d13ac1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_DMA_BUSY</b>&#160;&#160;&#160;((volatile uint32_t*)0xA4040018)</td></tr>
<tr class="memdesc:a6a76ea26fcea40d918ae9143c2d13ac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP DMA busy register. <br /></td></tr>
<tr class="separator:a6a76ea26fcea40d918ae9143c2d13ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683b22c948ea32a5c7ea7907acdf14c8"><td class="memItemLeft" align="right" valign="top"><a id="a683b22c948ea32a5c7ea7907acdf14c8" name="a683b22c948ea32a5c7ea7907acdf14c8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_SEMAPHORE</b>&#160;&#160;&#160;((volatile uint32_t*)0xA404001C)</td></tr>
<tr class="memdesc:a683b22c948ea32a5c7ea7907acdf14c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP semaphore register. <br /></td></tr>
<tr class="separator:a683b22c948ea32a5c7ea7907acdf14c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f5cf8b223d97801810f547b08ad40ad"><td class="memItemLeft" align="right" valign="top"><a id="a8f5cf8b223d97801810f547b08ad40ad" name="a8f5cf8b223d97801810f547b08ad40ad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_HALTED</b>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="memdesc:a8f5cf8b223d97801810f547b08ad40ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP halted. <br /></td></tr>
<tr class="separator:a8f5cf8b223d97801810f547b08ad40ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c7c6fb240cdc327b4315c0c88bc353"><td class="memItemLeft" align="right" valign="top"><a id="ab9c7c6fb240cdc327b4315c0c88bc353" name="ab9c7c6fb240cdc327b4315c0c88bc353"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_BROKE</b>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="memdesc:ab9c7c6fb240cdc327b4315c0c88bc353"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP executed a break instruction. <br /></td></tr>
<tr class="separator:ab9c7c6fb240cdc327b4315c0c88bc353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b575d6a574ef70b4f7db0c49c432072"><td class="memItemLeft" align="right" valign="top"><a id="a9b575d6a574ef70b4f7db0c49c432072" name="a9b575d6a574ef70b4f7db0c49c432072"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_DMA_BUSY</b>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="memdesc:a9b575d6a574ef70b4f7db0c49c432072"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP DMA busy. <br /></td></tr>
<tr class="separator:a9b575d6a574ef70b4f7db0c49c432072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0b4b7b3d5991247e9ce0223ae94cb1"><td class="memItemLeft" align="right" valign="top"><a id="a4f0b4b7b3d5991247e9ce0223ae94cb1" name="a4f0b4b7b3d5991247e9ce0223ae94cb1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_DMA_FULL</b>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="memdesc:a4f0b4b7b3d5991247e9ce0223ae94cb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP DMA full. <br /></td></tr>
<tr class="separator:a4f0b4b7b3d5991247e9ce0223ae94cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a723641bc0a76ad1c7bd909f737b3a68f"><td class="memItemLeft" align="right" valign="top"><a id="a723641bc0a76ad1c7bd909f737b3a68f" name="a723641bc0a76ad1c7bd909f737b3a68f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_IO_BUSY</b>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="memdesc:a723641bc0a76ad1c7bd909f737b3a68f"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP IO busy. <br /></td></tr>
<tr class="separator:a723641bc0a76ad1c7bd909f737b3a68f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687dbee7b543c8424e90c854e80944e9"><td class="memItemLeft" align="right" valign="top"><a id="a687dbee7b543c8424e90c854e80944e9" name="a687dbee7b543c8424e90c854e80944e9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SSTEP</b>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="memdesc:a687dbee7b543c8424e90c854e80944e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP is in single step mode. <br /></td></tr>
<tr class="separator:a687dbee7b543c8424e90c854e80944e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aada8a8ced7270bbcbd4e14eef6a112"><td class="memItemLeft" align="right" valign="top"><a id="a4aada8a8ced7270bbcbd4e14eef6a112" name="a4aada8a8ced7270bbcbd4e14eef6a112"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_INTERRUPT_ON_BREAK</b>&#160;&#160;&#160;(1 &lt;&lt; 6)</td></tr>
<tr class="memdesc:a4aada8a8ced7270bbcbd4e14eef6a112"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP generate interrupt when hit a break instruction. <br /></td></tr>
<tr class="separator:a4aada8a8ced7270bbcbd4e14eef6a112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5302c5cbfbbef6e0698f1f830d1ec067"><td class="memItemLeft" align="right" valign="top"><a id="a5302c5cbfbbef6e0698f1f830d1ec067" name="a5302c5cbfbbef6e0698f1f830d1ec067"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG0</b>&#160;&#160;&#160;(1 &lt;&lt; 7)</td></tr>
<tr class="memdesc:a5302c5cbfbbef6e0698f1f830d1ec067"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 0 is set. <br /></td></tr>
<tr class="separator:a5302c5cbfbbef6e0698f1f830d1ec067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc29153a69e755db73e6f59bb4d4556"><td class="memItemLeft" align="right" valign="top"><a id="acdc29153a69e755db73e6f59bb4d4556" name="acdc29153a69e755db73e6f59bb4d4556"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG1</b>&#160;&#160;&#160;(1 &lt;&lt; 8)</td></tr>
<tr class="memdesc:acdc29153a69e755db73e6f59bb4d4556"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 1 is set. <br /></td></tr>
<tr class="separator:acdc29153a69e755db73e6f59bb4d4556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d4ec66566cfb039c23affecf46d795d"><td class="memItemLeft" align="right" valign="top"><a id="a5d4ec66566cfb039c23affecf46d795d" name="a5d4ec66566cfb039c23affecf46d795d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG2</b>&#160;&#160;&#160;(1 &lt;&lt; 9)</td></tr>
<tr class="memdesc:a5d4ec66566cfb039c23affecf46d795d"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 2 is set. <br /></td></tr>
<tr class="separator:a5d4ec66566cfb039c23affecf46d795d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87280ee17775e563f64ef233adfd3f9"><td class="memItemLeft" align="right" valign="top"><a id="af87280ee17775e563f64ef233adfd3f9" name="af87280ee17775e563f64ef233adfd3f9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG3</b>&#160;&#160;&#160;(1 &lt;&lt; 10)</td></tr>
<tr class="memdesc:af87280ee17775e563f64ef233adfd3f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 3 is set. <br /></td></tr>
<tr class="separator:af87280ee17775e563f64ef233adfd3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f0711809c90d46b208da8ee3d2ae3f2"><td class="memItemLeft" align="right" valign="top"><a id="a2f0711809c90d46b208da8ee3d2ae3f2" name="a2f0711809c90d46b208da8ee3d2ae3f2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG4</b>&#160;&#160;&#160;(1 &lt;&lt; 11)</td></tr>
<tr class="memdesc:a2f0711809c90d46b208da8ee3d2ae3f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 4 is set. <br /></td></tr>
<tr class="separator:a2f0711809c90d46b208da8ee3d2ae3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b9d2b3f10335066c07b99a91a319fa3"><td class="memItemLeft" align="right" valign="top"><a id="a6b9d2b3f10335066c07b99a91a319fa3" name="a6b9d2b3f10335066c07b99a91a319fa3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG5</b>&#160;&#160;&#160;(1 &lt;&lt; 12)</td></tr>
<tr class="memdesc:a6b9d2b3f10335066c07b99a91a319fa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 5 is set. <br /></td></tr>
<tr class="separator:a6b9d2b3f10335066c07b99a91a319fa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7b73a5b64ba963bb1b2fce8e8ff526"><td class="memItemLeft" align="right" valign="top"><a id="a0f7b73a5b64ba963bb1b2fce8e8ff526" name="a0f7b73a5b64ba963bb1b2fce8e8ff526"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG6</b>&#160;&#160;&#160;(1 &lt;&lt; 13)</td></tr>
<tr class="memdesc:a0f7b73a5b64ba963bb1b2fce8e8ff526"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 6 is set. <br /></td></tr>
<tr class="separator:a0f7b73a5b64ba963bb1b2fce8e8ff526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438cc52b802a0d334bbab20ff7bd8f85"><td class="memItemLeft" align="right" valign="top"><a id="a438cc52b802a0d334bbab20ff7bd8f85" name="a438cc52b802a0d334bbab20ff7bd8f85"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_STATUS_SIG7</b>&#160;&#160;&#160;(1 &lt;&lt; 14)</td></tr>
<tr class="memdesc:a438cc52b802a0d334bbab20ff7bd8f85"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP signal 7 is set. <br /></td></tr>
<tr class="separator:a438cc52b802a0d334bbab20ff7bd8f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c16d5bafe0c534c6b8233a049aa577"><td class="memItemLeft" align="right" valign="top"><a id="a50c16d5bafe0c534c6b8233a049aa577" name="a50c16d5bafe0c534c6b8233a049aa577"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_HALT</b>&#160;&#160;&#160;0x00001</td></tr>
<tr class="memdesc:a50c16d5bafe0c534c6b8233a049aa577"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear <a class="el" href="rsp_8h.html#a8f5cf8b223d97801810f547b08ad40ad" title="SP halted.">SP_STATUS_HALTED</a> bit. <br /></td></tr>
<tr class="separator:a50c16d5bafe0c534c6b8233a049aa577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65ba6b4fd34bab9aeebaa87604a8952c"><td class="memItemLeft" align="right" valign="top"><a id="a65ba6b4fd34bab9aeebaa87604a8952c" name="a65ba6b4fd34bab9aeebaa87604a8952c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_HALT</b>&#160;&#160;&#160;0x00002</td></tr>
<tr class="memdesc:a65ba6b4fd34bab9aeebaa87604a8952c"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set <a class="el" href="rsp_8h.html#a8f5cf8b223d97801810f547b08ad40ad" title="SP halted.">SP_STATUS_HALTED</a> bit. <br /></td></tr>
<tr class="separator:a65ba6b4fd34bab9aeebaa87604a8952c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a558d274aad0d2e1c9de4ab32c7845adc"><td class="memItemLeft" align="right" valign="top"><a id="a558d274aad0d2e1c9de4ab32c7845adc" name="a558d274aad0d2e1c9de4ab32c7845adc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_BROKE</b>&#160;&#160;&#160;0x00004</td></tr>
<tr class="memdesc:a558d274aad0d2e1c9de4ab32c7845adc"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear BROKE bit. <br /></td></tr>
<tr class="separator:a558d274aad0d2e1c9de4ab32c7845adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a3f049c9fb25a0afbe3700d701b2a4"><td class="memItemLeft" align="right" valign="top"><a id="ab7a3f049c9fb25a0afbe3700d701b2a4" name="ab7a3f049c9fb25a0afbe3700d701b2a4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_INTR</b>&#160;&#160;&#160;0x00008</td></tr>
<tr class="memdesc:ab7a3f049c9fb25a0afbe3700d701b2a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear INTR bit. <br /></td></tr>
<tr class="separator:ab7a3f049c9fb25a0afbe3700d701b2a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa3d8e6989cbb4e15cac40030f4eb29"><td class="memItemLeft" align="right" valign="top"><a id="a3aa3d8e6989cbb4e15cac40030f4eb29" name="a3aa3d8e6989cbb4e15cac40030f4eb29"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_INTR</b>&#160;&#160;&#160;0x00010</td></tr>
<tr class="memdesc:a3aa3d8e6989cbb4e15cac40030f4eb29"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set HALT bit. <br /></td></tr>
<tr class="separator:a3aa3d8e6989cbb4e15cac40030f4eb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13c02f959e74c89b98dbea60966e0d1"><td class="memItemLeft" align="right" valign="top"><a id="ac13c02f959e74c89b98dbea60966e0d1" name="ac13c02f959e74c89b98dbea60966e0d1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SSTEP</b>&#160;&#160;&#160;0x00020</td></tr>
<tr class="memdesc:ac13c02f959e74c89b98dbea60966e0d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SSTEP bit. <br /></td></tr>
<tr class="separator:ac13c02f959e74c89b98dbea60966e0d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f63f4f37aead63d765d93472cb10dc8"><td class="memItemLeft" align="right" valign="top"><a id="a6f63f4f37aead63d765d93472cb10dc8" name="a6f63f4f37aead63d765d93472cb10dc8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SSTEP</b>&#160;&#160;&#160;0x00040</td></tr>
<tr class="memdesc:a6f63f4f37aead63d765d93472cb10dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SSTEP bit. <br /></td></tr>
<tr class="separator:a6f63f4f37aead63d765d93472cb10dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3df2b7f7ee01a6d5f2cca5591502ac"><td class="memItemLeft" align="right" valign="top"><a id="a2b3df2b7f7ee01a6d5f2cca5591502ac" name="a2b3df2b7f7ee01a6d5f2cca5591502ac"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_INTR_BREAK</b>&#160;&#160;&#160;0x00080</td></tr>
<tr class="memdesc:a2b3df2b7f7ee01a6d5f2cca5591502ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear <a class="el" href="rsp_8h.html#a4aada8a8ced7270bbcbd4e14eef6a112" title="SP generate interrupt when hit a break instruction.">SP_STATUS_INTERRUPT_ON_BREAK</a> bit. <br /></td></tr>
<tr class="separator:a2b3df2b7f7ee01a6d5f2cca5591502ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af687b60471389c56639f05d4ff2fc175"><td class="memItemLeft" align="right" valign="top"><a id="af687b60471389c56639f05d4ff2fc175" name="af687b60471389c56639f05d4ff2fc175"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_INTR_BREAK</b>&#160;&#160;&#160;0x00100</td></tr>
<tr class="memdesc:af687b60471389c56639f05d4ff2fc175"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SSTEP bit. <br /></td></tr>
<tr class="separator:af687b60471389c56639f05d4ff2fc175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98943f85edcda7d3010b2fc08d5d9da0"><td class="memItemLeft" align="right" valign="top"><a id="a98943f85edcda7d3010b2fc08d5d9da0" name="a98943f85edcda7d3010b2fc08d5d9da0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG0</b>&#160;&#160;&#160;0x00200</td></tr>
<tr class="memdesc:a98943f85edcda7d3010b2fc08d5d9da0"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG0 bit. <br /></td></tr>
<tr class="separator:a98943f85edcda7d3010b2fc08d5d9da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14670adc2a92860ebba91402d1efe412"><td class="memItemLeft" align="right" valign="top"><a id="a14670adc2a92860ebba91402d1efe412" name="a14670adc2a92860ebba91402d1efe412"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG0</b>&#160;&#160;&#160;0x00400</td></tr>
<tr class="memdesc:a14670adc2a92860ebba91402d1efe412"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG0 bit. <br /></td></tr>
<tr class="separator:a14670adc2a92860ebba91402d1efe412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5efccae0c040950d1921698afc6b3f2f"><td class="memItemLeft" align="right" valign="top"><a id="a5efccae0c040950d1921698afc6b3f2f" name="a5efccae0c040950d1921698afc6b3f2f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG1</b>&#160;&#160;&#160;0x00800</td></tr>
<tr class="memdesc:a5efccae0c040950d1921698afc6b3f2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG1 bit. <br /></td></tr>
<tr class="separator:a5efccae0c040950d1921698afc6b3f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad317c7b49ed85284f3619795b912a6f4"><td class="memItemLeft" align="right" valign="top"><a id="ad317c7b49ed85284f3619795b912a6f4" name="ad317c7b49ed85284f3619795b912a6f4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG1</b>&#160;&#160;&#160;0x01000</td></tr>
<tr class="memdesc:ad317c7b49ed85284f3619795b912a6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG1 bit. <br /></td></tr>
<tr class="separator:ad317c7b49ed85284f3619795b912a6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e5c3f692916de55398ef3d7ac0b8609"><td class="memItemLeft" align="right" valign="top"><a id="a2e5c3f692916de55398ef3d7ac0b8609" name="a2e5c3f692916de55398ef3d7ac0b8609"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG2</b>&#160;&#160;&#160;0x02000</td></tr>
<tr class="memdesc:a2e5c3f692916de55398ef3d7ac0b8609"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG2 bit. <br /></td></tr>
<tr class="separator:a2e5c3f692916de55398ef3d7ac0b8609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6870aa6a54985857bbbbde257d512f2"><td class="memItemLeft" align="right" valign="top"><a id="ad6870aa6a54985857bbbbde257d512f2" name="ad6870aa6a54985857bbbbde257d512f2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG2</b>&#160;&#160;&#160;0x04000</td></tr>
<tr class="memdesc:ad6870aa6a54985857bbbbde257d512f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG2 bit. <br /></td></tr>
<tr class="separator:ad6870aa6a54985857bbbbde257d512f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b2b8f1bacbee3bca244dd345ad334c1"><td class="memItemLeft" align="right" valign="top"><a id="a1b2b8f1bacbee3bca244dd345ad334c1" name="a1b2b8f1bacbee3bca244dd345ad334c1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG3</b>&#160;&#160;&#160;0x08000</td></tr>
<tr class="memdesc:a1b2b8f1bacbee3bca244dd345ad334c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG3 bit. <br /></td></tr>
<tr class="separator:a1b2b8f1bacbee3bca244dd345ad334c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55c468658920ca88eccc70ed56baf726"><td class="memItemLeft" align="right" valign="top"><a id="a55c468658920ca88eccc70ed56baf726" name="a55c468658920ca88eccc70ed56baf726"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG3</b>&#160;&#160;&#160;0x10000</td></tr>
<tr class="memdesc:a55c468658920ca88eccc70ed56baf726"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG3 bit. <br /></td></tr>
<tr class="separator:a55c468658920ca88eccc70ed56baf726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a92908a0ba3350bc29ad9078a847108"><td class="memItemLeft" align="right" valign="top"><a id="a2a92908a0ba3350bc29ad9078a847108" name="a2a92908a0ba3350bc29ad9078a847108"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG4</b>&#160;&#160;&#160;0x20000</td></tr>
<tr class="memdesc:a2a92908a0ba3350bc29ad9078a847108"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG4 bit. <br /></td></tr>
<tr class="separator:a2a92908a0ba3350bc29ad9078a847108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e492b23f1e021637b9aea8c6b6f62a9"><td class="memItemLeft" align="right" valign="top"><a id="a0e492b23f1e021637b9aea8c6b6f62a9" name="a0e492b23f1e021637b9aea8c6b6f62a9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG4</b>&#160;&#160;&#160;0x40000</td></tr>
<tr class="memdesc:a0e492b23f1e021637b9aea8c6b6f62a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG4 bit. <br /></td></tr>
<tr class="separator:a0e492b23f1e021637b9aea8c6b6f62a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40d201d0c28687c5a17329d30cf71860"><td class="memItemLeft" align="right" valign="top"><a id="a40d201d0c28687c5a17329d30cf71860" name="a40d201d0c28687c5a17329d30cf71860"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG5</b>&#160;&#160;&#160;0x80000</td></tr>
<tr class="memdesc:a40d201d0c28687c5a17329d30cf71860"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG5 bit. <br /></td></tr>
<tr class="separator:a40d201d0c28687c5a17329d30cf71860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30a6110b96e80cee5e00c9818940a57"><td class="memItemLeft" align="right" valign="top"><a id="ad30a6110b96e80cee5e00c9818940a57" name="ad30a6110b96e80cee5e00c9818940a57"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG5</b>&#160;&#160;&#160;0x100000</td></tr>
<tr class="memdesc:ad30a6110b96e80cee5e00c9818940a57"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG5 bit. <br /></td></tr>
<tr class="separator:ad30a6110b96e80cee5e00c9818940a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d8bf8cfdc53ea0ca8dc09c2d0c97db"><td class="memItemLeft" align="right" valign="top"><a id="a06d8bf8cfdc53ea0ca8dc09c2d0c97db" name="a06d8bf8cfdc53ea0ca8dc09c2d0c97db"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG6</b>&#160;&#160;&#160;0x200000</td></tr>
<tr class="memdesc:a06d8bf8cfdc53ea0ca8dc09c2d0c97db"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG6 bit. <br /></td></tr>
<tr class="separator:a06d8bf8cfdc53ea0ca8dc09c2d0c97db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a940178b2ac6c522baa730d070350937d"><td class="memItemLeft" align="right" valign="top"><a id="a940178b2ac6c522baa730d070350937d" name="a940178b2ac6c522baa730d070350937d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG6</b>&#160;&#160;&#160;0x400000</td></tr>
<tr class="memdesc:a940178b2ac6c522baa730d070350937d"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG6 bit. <br /></td></tr>
<tr class="separator:a940178b2ac6c522baa730d070350937d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d67a5dac182be9fe4bbae65f28a64bd"><td class="memItemLeft" align="right" valign="top"><a id="a7d67a5dac182be9fe4bbae65f28a64bd" name="a7d67a5dac182be9fe4bbae65f28a64bd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_CLEAR_SIG7</b>&#160;&#160;&#160;0x800000</td></tr>
<tr class="memdesc:a7d67a5dac182be9fe4bbae65f28a64bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: clear SIG7 bit. <br /></td></tr>
<tr class="separator:a7d67a5dac182be9fe4bbae65f28a64bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b88e6bd6d43c35101dba2588db3247"><td class="memItemLeft" align="right" valign="top"><a id="a95b88e6bd6d43c35101dba2588db3247" name="a95b88e6bd6d43c35101dba2588db3247"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SP_WSTATUS_SET_SIG7</b>&#160;&#160;&#160;0x1000000</td></tr>
<tr class="memdesc:a95b88e6bd6d43c35101dba2588db3247"><td class="mdescLeft">&#160;</td><td class="mdescRight">SP_STATUS write mask: set SIG7 bit. <br /></td></tr>
<tr class="separator:a95b88e6bd6d43c35101dba2588db3247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c69c50ce3eccc8d661dce878129b0b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0">DEFINE_RSP_UCODE</a>(ucode_name, ...)</td></tr>
<tr class="memdesc:a1c69c50ce3eccc8d661dce878129b0b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define one RSP ucode compiled via libdragon's build system (n64.mk).  <a href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0">More...</a><br /></td></tr>
<tr class="separator:a1c69c50ce3eccc8d661dce878129b0b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae79047e3c1b28e7ed6b5e71025bcd1bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb">rsp_crash</a>()</td></tr>
<tr class="memdesc:ae79047e3c1b28e7ed6b5e71025bcd1bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort the program showing a RSP crash screen.  <a href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb">More...</a><br /></td></tr>
<tr class="separator:ae79047e3c1b28e7ed6b5e71025bcd1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ef683f18a90998c1711cd03a220ca9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#a67ef683f18a90998c1711cd03a220ca9">rsp_crashf</a>(msg, ...)</td></tr>
<tr class="memdesc:a67ef683f18a90998c1711cd03a220ca9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort the program showing a RSP crash screen with a symptom message.  <a href="rsp_8h.html#a67ef683f18a90998c1711cd03a220ca9">More...</a><br /></td></tr>
<tr class="separator:a67ef683f18a90998c1711cd03a220ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef223885601547c7ff27b55520714076"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#aef223885601547c7ff27b55520714076">RSP_WAIT_LOOP</a>(timeout_ms)</td></tr>
<tr class="memdesc:aef223885601547c7ff27b55520714076"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a loop that waits for some condition that is related to RSP, aborting with a RSP crash after a timeout.  <a href="rsp_8h.html#aef223885601547c7ff27b55520714076">More...</a><br /></td></tr>
<tr class="separator:aef223885601547c7ff27b55520714076"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3a09625a4dc302db558f31599a8169d"><td class="memItemLeft" align="right" valign="top"><a id="ac3a09625a4dc302db558f31599a8169d" name="ac3a09625a4dc302db558f31599a8169d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>rsp_init</b> (void)</td></tr>
<tr class="memdesc:ac3a09625a4dc302db558f31599a8169d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the RSP subsytem. <br /></td></tr>
<tr class="separator:ac3a09625a4dc302db558f31599a8169d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaaa649a5d63d3a901aa029f18743852"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#abaaa649a5d63d3a901aa029f18743852">rsp_load</a> (<a class="el" href="structrsp__ucode__t.html">rsp_ucode_t</a> *ucode)</td></tr>
<tr class="memdesc:abaaa649a5d63d3a901aa029f18743852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a RSP ucode.  <a href="rsp_8h.html#abaaa649a5d63d3a901aa029f18743852">More...</a><br /></td></tr>
<tr class="separator:abaaa649a5d63d3a901aa029f18743852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b06ba89506266ccb7c962872f0c783b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#a9b06ba89506266ccb7c962872f0c783b">rsp_run</a> (void)</td></tr>
<tr class="memdesc:a9b06ba89506266ccb7c962872f0c783b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run RSP ucode.  <a href="rsp_8h.html#a9b06ba89506266ccb7c962872f0c783b">More...</a><br /></td></tr>
<tr class="separator:a9b06ba89506266ccb7c962872f0c783b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896f4959706e9ecb62ecf2de43bcb276"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#a896f4959706e9ecb62ecf2de43bcb276">rsp_run_async</a> (void)</td></tr>
<tr class="memdesc:a896f4959706e9ecb62ecf2de43bcb276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run RSP async.  <a href="rsp_8h.html#a896f4959706e9ecb62ecf2de43bcb276">More...</a><br /></td></tr>
<tr class="separator:a896f4959706e9ecb62ecf2de43bcb276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d8697b67857ad9bd55885c0eb79c984"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#a5d8697b67857ad9bd55885c0eb79c984">rsp_wait</a> (void)</td></tr>
<tr class="memdesc:a5d8697b67857ad9bd55885c0eb79c984"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until RSP has finished processing.  <a href="rsp_8h.html#a5d8697b67857ad9bd55885c0eb79c984">More...</a><br /></td></tr>
<tr class="separator:a5d8697b67857ad9bd55885c0eb79c984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0508fe05f465102e111d6f6ae0598058"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#a0508fe05f465102e111d6f6ae0598058">rsp_load_code</a> (void *code, unsigned long size, unsigned int imem_offset)</td></tr>
<tr class="memdesc:a0508fe05f465102e111d6f6ae0598058"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of code into RSP IMEM.  <a href="rsp_8h.html#a0508fe05f465102e111d6f6ae0598058">More...</a><br /></td></tr>
<tr class="separator:a0508fe05f465102e111d6f6ae0598058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3b056a6e41df010803e842867700089"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#ac3b056a6e41df010803e842867700089">rsp_load_data</a> (void *data, unsigned long size, unsigned int dmem_offset)</td></tr>
<tr class="memdesc:ac3b056a6e41df010803e842867700089"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of data into RSP DMEM.  <a href="rsp_8h.html#ac3b056a6e41df010803e842867700089">More...</a><br /></td></tr>
<tr class="separator:ac3b056a6e41df010803e842867700089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31d4a6206ad563c4153915037b25401e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#a31d4a6206ad563c4153915037b25401e">rsp_read_code</a> (void *code, unsigned long size, unsigned int imem_offset)</td></tr>
<tr class="memdesc:a31d4a6206ad563c4153915037b25401e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of code from RSP IMEM to RDRAM.  <a href="rsp_8h.html#a31d4a6206ad563c4153915037b25401e">More...</a><br /></td></tr>
<tr class="separator:a31d4a6206ad563c4153915037b25401e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9587d4d7fcafe85c672163c24972c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rsp_8h.html#adf9587d4d7fcafe85c672163c24972c0">rsp_read_data</a> (void *data, unsigned long size, unsigned int dmem_offset)</td></tr>
<tr class="memdesc:adf9587d4d7fcafe85c672163c24972c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a DMA transfer to load a piece of data from RSP DMEM to RDRAM.  <a href="rsp_8h.html#adf9587d4d7fcafe85c672163c24972c0">More...</a><br /></td></tr>
<tr class="separator:adf9587d4d7fcafe85c672163c24972c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Low-level RSP hardware library. </p>
<p >This library offers very low-level support for RSP programming. The goal is to provide access to the hardware by exposing macros for all hardware registers, provide a few simple helpers to load and run RSP ucode (without any constraint or limitation on how the ucode should be designed, how it should communicate with the CPU, etc.), and a few debugging helpers to aid during development.</p>
<p >This documentation is not a guide to become a RSP programmer. It assumes familiarity with RSP programming concepts and focus on explaining libdragon RSP support.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Ucode definition and loading</h2>
<p >To define a RSP ucode, assuming you are using the n64.mk build system, it is sufficient to do the following:</p>
<ol type="1">
<li>Write your ucode in a file with extension <code>.S</code> and whose name starts with <code>rsp</code>. For instance <code>rsp_math.S</code>.</li>
<li>Add the corresponding object file (<code>rsp_math.o</code>) in your Makefile in the list of dependencies for building your ROM, like all the other object files that come from C files.</li>
<li>Declare the existence of the ucode in the source using <a class="el" href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0" title="Define one RSP ucode compiled via libdragon&#39;s build system (n64.mk).">DEFINE_RSP_UCODE</a>, for instance <code><a class="el" href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0" title="Define one RSP ucode compiled via libdragon&#39;s build system (n64.mk).">DEFINE_RSP_UCODE(rsp_math)</a></code>.</li>
</ol>
<p >At this point, you can load the ucode using <a class="el" href="rsp_8h.html#abaaa649a5d63d3a901aa029f18743852" title="Load a RSP ucode.">rsp_load</a> and run it using either <a class="el" href="rsp_8h.html#a9b06ba89506266ccb7c962872f0c783b" title="Run RSP ucode.">rsp_run</a>, or <a class="el" href="rsp_8h.html#a896f4959706e9ecb62ecf2de43bcb276" title="Run RSP async.">rsp_run_async</a> (and later synchronize with <a class="el" href="rsp_8h.html#a5d8697b67857ad9bd55885c0eb79c984" title="Wait until RSP has finished processing.">rsp_wait</a>). You can look at the <code>ucodetest</code> example which is a very minimal program that does some RSP programming.</p>
<p >If you don't use n64.mk, you will have to come up with your own way to load the ucode text and data segment into the ROM, and then either define your own <a class="el" href="structrsp__ucode__t.html" title="RSP ucode definition.">rsp_ucode_t</a> structure, or manually call the lower level functions <a class="el" href="rsp_8h.html#a0508fe05f465102e111d6f6ae0598058" title="Do a DMA transfer to load a piece of code into RSP IMEM.">rsp_load_code</a> and <a class="el" href="rsp_8h.html#ac3b056a6e41df010803e842867700089" title="Do a DMA transfer to load a piece of data into RSP DMEM.">rsp_load_data</a>.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Reading and writing data to RSP</h2>
<p >To provide input and read output from the RSP, there are a few possible ways:</p>
<ol type="1">
<li>Directly access RSP DMEM using the <a class="el" href="rsp_8h.html#af2eae5f6aa7c8ebae3255e00fa7fb23d" title="RSP DMEM: 4K of data memory.">SP_DMEM</a> macro. The DMEM is memory mapped into the CPU address space, so it can be accessed directly. Only 32-bit reads and writes are supported. Note that you can only access DMEM while the RSP is not running.</li>
<li>Run a DMA transfer using <a class="el" href="rsp_8h.html#ac3b056a6e41df010803e842867700089" title="Do a DMA transfer to load a piece of data into RSP DMEM.">rsp_load_data</a> or <a class="el" href="rsp_8h.html#adf9587d4d7fcafe85c672163c24972c0" title="Do a DMA transfer to load a piece of data from RSP DMEM to RDRAM.">rsp_read_data</a>. This is generally faster then accessing DMEM especially for larger transfers, but like all DMA transfers it requires the RDRAM buffer to be 8-byte aligned.</li>
<li>Have the RSP do DMA transfers to and from RDRAM. This needs to be part of the ucode program.</li>
</ol>
<h2><a class="anchor" id="autotoc_md17"></a>
RSP crashes</h2>
<p >RSP does not have any concept of exception. So in general it is not possible to tell whether something went wrong while running the ucode.</p>
<p >We define "RSP crash" any situation in which the RSP is behaving in an unexpected way. For instance, it may have returned corrupted data, or have stopped responding (eg: it is in an infinite loop), or has interrupted its execution before providing a result (eg: a signal has not been set in the status register).</p>
<p >When the CPU notices that the RSP may have crashed, it can invoke the <a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb" title="Abort the program showing a RSP crash screen.">rsp_crash</a> function. This function interrupts the program showing a crash screen that contains a full register dump, and then aborts execution, so it must be used in non-recoverable situations. A even more complete dump that includes also a full DMEM dump is sent via <a class="el" href="debug_8h.html#aa3e8be416ef1525cfd3230204b56d184" title="Write a message to the debugging channel.">debugf</a> on the debugging spew (see the debugging library to check how to hook up to it). A function <a class="el" href="rsp_8h.html#a67ef683f18a90998c1711cd03a220ca9" title="Abort the program showing a RSP crash screen with a symptom message.">rsp_crashf</a> is also available in case the CPU wants to provide a message on the symptom that was used to detect the RSP crash (eg: <code>rsp_crashf("computed data is corrupted")</code>).</p>
<p >To help detect RSP crashes that involve timeouts, a macro <a class="el" href="rsp_8h.html#aef223885601547c7ff27b55520714076" title="Create a loop that waits for some condition that is related to RSP, aborting with a RSP crash after a...">RSP_WAIT_LOOP</a> is available that can be used to implement CPU busy loops where the CPU waits for the RSP to do something. The macro just simplifies the creation of a loop with a timeout that calls <a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb" title="Abort the program showing a RSP crash screen.">rsp_crash</a>, the actual condition to wait for is left to the caller for the maximum programming flexibility. Notice that <a class="el" href="rsp_8h.html#a5d8697b67857ad9bd55885c0eb79c984" title="Wait until RSP has finished processing.">rsp_wait</a> and <a class="el" href="rsp_8h.html#a9b06ba89506266ccb7c962872f0c783b" title="Run RSP ucode.">rsp_run</a> use <a class="el" href="rsp_8h.html#aef223885601547c7ff27b55520714076" title="Create a loop that waits for some condition that is related to RSP, aborting with a RSP crash after a...">RSP_WAIT_LOOP</a> internally with a timeout of 500ms to wait for the RSP to finish execution of the ucode, so using those APIs is enough to detect infinite loops in ucode execution and trigger a RSP crash screen.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Custom ucode crash handlers</h2>
<p >It may be useful to also dump ucode-specific information when the crash screen is triggered. For instance, a ucode might want to dump on the screen some important variable or buffers taken from DMEM, or even reconstruct some state by looking at the registers. To do so, it is possible to register a ucode-specific crash handler by filling the <code>crash_handler</code> field in the <a class="el" href="structrsp__ucode__t.html" title="RSP ucode definition.">rsp_ucode_t</a> structure (it can be done either at runtime, or at compile-time when using the <a class="el" href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0" title="Define one RSP ucode compiled via libdragon&#39;s build system (n64.mk).">DEFINE_RSP_UCODE</a> macro).</p>
<p >The crash handler will be called by the RSP crash screen and can either add information on the screen (via printf) or dump them to the debugging log (via debugf). It receives a <a class="el" href="rsp_8h.html#structrsp__snapshot__t" title="Snapshot of the register status of the RSP.">rsp_snapshot_t</a>, which is a full snapshot of the whole RSP state at the moment of crash, including all registers (scalars and vectors), all COP0/COP2 registers, and the full IMEM and DMEM contents.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
RSP asserts</h2>
<p >Since RSP debugging is quite complex due to the limited available communication channels, it is advised to adopt defensive programming while writing RSP ucode. The header file rsp.inc provides a set of assert macros that can be used in the RSP ucode to check for assumptions and invariants, similar to the C assert. To use them, also include the file rsp_assert.inc in your text segment.</p>
<p >When the RSP hits an assert, it enters an infinite loop, that will be eventually detected by the CPU, triggering the RSP crash screen. Each assertion can define a numeric assert code that will be shown in the crash screen.</p>
<p >To further help with debugging, it is possible to register a custom assert manager in the ucode. Similar to the crash handler, the assert handler will be called when an assert is triggered and will be provided with a <a class="el" href="rsp_8h.html#structrsp__snapshot__t" title="Snapshot of the register status of the RSP.">rsp_snapshot_t</a>, and the assert code. The assert handler can be used to parse the assert code and display a proper assert message (about two lines of text). Since each assert is placed in a specific point in the code, the assert handler can inspect the register contents at the point of assertion to provide further information on the crash. Notice that the crash handler will still be called also for asserts and remains the best place where display a dump of the main internal data structures of the overlay.</p>
<p >The RSP assert macros are compiled away when NDEBUG is defined (just like the C assert), so that it is possible to remove them from the final build in case of memory constraints. </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structrsp__snapshot__t" id="structrsp__snapshot__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structrsp__snapshot__t">&#9670;&nbsp;</a></span>rsp_snapshot_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rsp_snapshot_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p >Snapshot of the register status of the RSP. </p>
<p >This structure is used in the crash handler. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a283f7940a89ffc52fcc04cc67401439c" name="a283f7940a89ffc52fcc04cc67401439c"></a>uint32_t</td>
<td class="fieldname">
cop0[16]</td>
<td class="fielddoc">
COP0 registers (note: reg 4 is SP_STATUS) </td></tr>
<tr><td class="fieldtype">
<a id="ade460aca80d711b6143de2ed083a6313" name="ade460aca80d711b6143de2ed083a6313"></a>uint32_t</td>
<td class="fieldname">
cop2[3]</td>
<td class="fielddoc">
COP2 control registers. </td></tr>
<tr><td class="fieldtype">
<a id="a828abbd16a038db42094df8831602934" name="a828abbd16a038db42094df8831602934"></a>uint8_t</td>
<td class="fieldname">
dmem[4096]</td>
<td class="fielddoc">
Contents of DMEM. </td></tr>
<tr><td class="fieldtype">
<a id="adad471a4ff79cf1d28e4a90e3c7d1ea2" name="adad471a4ff79cf1d28e4a90e3c7d1ea2"></a>uint32_t</td>
<td class="fieldname">
gpr[32]</td>
<td class="fielddoc">
General purpose registers. </td></tr>
<tr><td class="fieldtype">
<a id="ae1405b13440ab3b2280cdddde0e9ab67" name="ae1405b13440ab3b2280cdddde0e9ab67"></a>uint8_t</td>
<td class="fieldname">
imem[4096]</td>
<td class="fielddoc">
Contents of IMEM. </td></tr>
<tr><td class="fieldtype">
<a id="a290a25cf74ccb2417b8165f0fb373b3e" name="a290a25cf74ccb2417b8165f0fb373b3e"></a>uint32_t</td>
<td class="fieldname">
pc</td>
<td class="fielddoc">
Program counter. </td></tr>
<tr><td class="fieldtype">
<a id="a0a922c0b0bd1e4a58a389d53125d5bd3" name="a0a922c0b0bd1e4a58a389d53125d5bd3"></a>uint16_t</td>
<td class="fieldname">
vaccum[3][8]</td>
<td class="fielddoc">
Vector accumulator. </td></tr>
<tr><td class="fieldtype">
<a id="a007496e4e8d0e57e66462151c8156051" name="a007496e4e8d0e57e66462151c8156051"></a>uint16_t</td>
<td class="fieldname">
vpr[32][8]</td>
<td class="fielddoc">
Vector registers. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1c69c50ce3eccc8d661dce878129b0b0" name="a1c69c50ce3eccc8d661dce878129b0b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c69c50ce3eccc8d661dce878129b0b0">&#9670;&nbsp;</a></span>DEFINE_RSP_UCODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFINE_RSP_UCODE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ucode_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keyword">extern</span> uint8_t ucode_name ## _text_start[]; \</div>
<div class="line">    extern uint8_t ucode_name ## _data_start[]; \</div>
<div class="line">    extern uint8_t ucode_name ## _text_end[0]; \</div>
<div class="line">    extern uint8_t ucode_name ## _data_end[0]; \</div>
<div class="line">    rsp_ucode_t ucode_name = (<a class="code hl_struct" href="structrsp__ucode__t.html">rsp_ucode_t</a>){ \</div>
<div class="line">        .code = ucode_name ## _text_start, \</div>
<div class="line">        .data = ucode_name ## _data_start, \</div>
<div class="line">        .code_end = ucode_name ## _text_end, \</div>
<div class="line">        .data_end = ucode_name ## _data_end, \</div>
<div class="line">        .name = #ucode_name, .start_pc = 0, \</div>
<div class="line">        .crash_handler = 0, .assert_handler = 0, \</div>
<div class="line">        __VA_ARGS__ \</div>
<div class="line">    }</div>
<div class="ttc" id="astructrsp__ucode__t_html"><div class="ttname"><a href="structrsp__ucode__t.html">rsp_ucode_t</a></div><div class="ttdoc">RSP ucode definition.</div><div class="ttdef"><b>Definition:</b> rsp.h:269</div></div>
</div><!-- fragment -->
<p>Define one RSP ucode compiled via libdragon's build system (n64.mk). </p>
<p >If you're using libdragon's build system (n64.mk), use <a class="el" href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0" title="Define one RSP ucode compiled via libdragon&#39;s build system (n64.mk).">DEFINE_RSP_UCODE()</a> to define one ucode coming from a rsp_*.S file. For instance, if you wrote and compiled a ucode called rsp_math.S, you can use <a class="el" href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0" title="Define one RSP ucode compiled via libdragon&#39;s build system (n64.mk).">DEFINE_RSP_UCODE(rsp_math)</a> to define it at the global level. You can then use rsp_load(&amp;rsp_math) to load it.</p>
<p >To statically define attributes of the ucode, you can use the C designated initializer syntax.</p>
<div class="fragment"><div class="line"><span class="comment">// Define the RSP ucode stored in file rsp_math.S.</span></div>
<div class="line"><span class="comment">// For the sake of this example, we also show how to set the member</span></div>
<div class="line"><span class="comment">// start_pc at definition time. You normally don&#39;t need to change this</span></div>
<div class="line"><span class="comment">// as most ucode will start at 0x0 anyway (which is the default).</span></div>
<div class="line"><a class="code hl_define" href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0">DEFINE_RSP_UCODE</a>(&amp;rsp_math, .start_pc = 0x100);</div>
<div class="ttc" id="arsp_8h_html_a1c69c50ce3eccc8d661dce878129b0b0"><div class="ttname"><a href="rsp_8h.html#a1c69c50ce3eccc8d661dce878129b0b0">DEFINE_RSP_UCODE</a></div><div class="ttdeci">#define DEFINE_RSP_UCODE(ucode_name,...)</div><div class="ttdoc">Define one RSP ucode compiled via libdragon's build system (n64.mk).</div><div class="ttdef"><b>Definition:</b> rsp.h:334</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ae79047e3c1b28e7ed6b5e71025bcd1bb" name="ae79047e3c1b28e7ed6b5e71025bcd1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae79047e3c1b28e7ed6b5e71025bcd1bb">&#9670;&nbsp;</a></span>rsp_crash</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rsp_crash</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    ({ \</div>
<div class="line">    __rsp_crash(__FILE__, __LINE__, __func__, NULL); \</div>
<div class="line">})</div>
</div><!-- fragment -->
<p>Abort the program showing a RSP crash screen. </p>
<p >This function aborts the execution of the program, and shows an exception screen which contains the RSP status.</p>
<p >This function (and its sibling <a class="el" href="rsp_8h.html#a67ef683f18a90998c1711cd03a220ca9" title="Abort the program showing a RSP crash screen with a symptom message.">rsp_crashf</a>) should be invoked whenever the CPU realizes that the RSP is severely misbehaving, as it provides useful information on the RSP status that can help tracking down the bug. It is invoked automatically by this library (and others RSP libraries that build upon) whenever internal consistency checks fail. It is also invoked as part of <code>RSP_WAIT_LOOP</code> when the timeout is reached, which is the most common way of detecting RSP misbehavior.</p>
<p >If the RSP has hit an assert, the crash screen will display the assert- specific information (like assert code and assert message).</p>
<p >To display ucode-specific information (like structural decoding of DMEM data), this function will call the function crash_handler in the current <a class="el" href="structrsp__ucode__t.html" title="RSP ucode definition.">rsp_ucode_t</a>, if it is defined.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rsp_8h.html#a67ef683f18a90998c1711cd03a220ca9" title="Abort the program showing a RSP crash screen with a symptom message.">rsp_crashf</a> </dd></dl>

</div>
</div>
<a id="a67ef683f18a90998c1711cd03a220ca9" name="a67ef683f18a90998c1711cd03a220ca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ef683f18a90998c1711cd03a220ca9">&#9670;&nbsp;</a></span>rsp_crashf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define rsp_crashf</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    ({ \</div>
<div class="line">    __rsp_crash(__FILE__, __LINE__, __func__, msg, ##__VA_ARGS__); \</div>
<div class="line">})</div>
</div><!-- fragment -->
<p>Abort the program showing a RSP crash screen with a symptom message. </p>
<p >This function is similar to <a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb" title="Abort the program showing a RSP crash screen.">rsp_crash</a>, but also allows to specify a message that will be displayed in the crash screen. Since the CPU is normally unaware of the exact reason why the RSP has crashed, the message is possibly just a symptom as observed by the CPU (eg: "timeout reached", "signal was not set"), and is in fact referred as "symptom" in the RSP crash screen.</p>
<p >See <a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb" title="Abort the program showing a RSP crash screen.">rsp_crash</a> for more information on when to call this function and how it can be useful.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb" title="Abort the program showing a RSP crash screen.">rsp_crash</a> </dd></dl>

</div>
</div>
<a id="aef223885601547c7ff27b55520714076" name="aef223885601547c7ff27b55520714076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef223885601547c7ff27b55520714076">&#9670;&nbsp;</a></span>RSP_WAIT_LOOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSP_WAIT_LOOP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timeout_ms</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">for</span> (uint32_t __t = <a class="code hl_define" href="group__n64sys.html#ga3f00b2f3f7a3bb391282d0b2da8969f1">TICKS_READ</a>() + <a class="code hl_define" href="group__n64sys.html#gac393c76be44d9322b9b06c2b334f38ad">TICKS_FROM_MS</a>(timeout_ms); \</div>
<div class="line">         TICKS_BEFORE(<a class="code hl_define" href="group__n64sys.html#ga3f00b2f3f7a3bb391282d0b2da8969f1">TICKS_READ</a>(), __t) || (<a class="code hl_define" href="rsp_8h.html#a67ef683f18a90998c1711cd03a220ca9">rsp_crashf</a>(<span class="stringliteral">&quot;wait loop timed out (%d ms)&quot;</span>, timeout_ms), <span class="keyword">false</span>); \</div>
<div class="line">         __rsp_check_assert(__FILE__, __LINE__, __func__))</div>
<div class="ttc" id="agroup__n64sys_html_ga3f00b2f3f7a3bb391282d0b2da8969f1"><div class="ttname"><a href="group__n64sys.html#ga3f00b2f3f7a3bb391282d0b2da8969f1">TICKS_READ</a></div><div class="ttdeci">#define TICKS_READ()</div><div class="ttdoc">Returns the COP0 register $9 (count).</div><div class="ttdef"><b>Definition:</b> n64sys.h:129</div></div>
<div class="ttc" id="agroup__n64sys_html_gac393c76be44d9322b9b06c2b334f38ad"><div class="ttname"><a href="group__n64sys.html#gac393c76be44d9322b9b06c2b334f38ad">TICKS_FROM_MS</a></div><div class="ttdeci">#define TICKS_FROM_MS(val)</div><div class="ttdoc">Returns equivalent count ticks for the given millis.</div><div class="ttdef"><b>Definition:</b> n64sys.h:159</div></div>
<div class="ttc" id="arsp_8h_html_a67ef683f18a90998c1711cd03a220ca9"><div class="ttname"><a href="rsp_8h.html#a67ef683f18a90998c1711cd03a220ca9">rsp_crashf</a></div><div class="ttdeci">#define rsp_crashf(msg,...)</div><div class="ttdoc">Abort the program showing a RSP crash screen with a symptom message.</div><div class="ttdef"><b>Definition:</b> rsp.h:486</div></div>
</div><!-- fragment -->
<p>Create a loop that waits for some condition that is related to RSP, aborting with a RSP crash after a timeout. </p>
<p >This macro simplifies the creation of a loop that busy-waits for operations performed by the RSP. If the condition is not reached within a timeout, it is assumed that the RSP has crashed or otherwise stalled and <a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb" title="Abort the program showing a RSP crash screen.">rsp_crash</a> is invoked to abort the program showing a debugging screen.</p>
<div class="fragment"><div class="line"><span class="comment">// This example shows a loop that waits for the RSP to set signal 2</span></div>
<div class="line"><span class="comment">// in the status register. It is just an example on how to use the</span></div>
<div class="line"><span class="comment">// macro.</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_define" href="rsp_8h.html#aef223885601547c7ff27b55520714076">RSP_WAIT_LOOP</a>(150) {</div>
<div class="line">    <span class="keywordflow">if</span> (*<a class="code hl_define" href="rsp_8h.html#afb7ef6177f79ef5225e5c9cebaa023c2">SP_STATUS</a> &amp; SP_STATUS_SIG_2)</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">}</div>
<div class="ttc" id="arsp_8h_html_aef223885601547c7ff27b55520714076"><div class="ttname"><a href="rsp_8h.html#aef223885601547c7ff27b55520714076">RSP_WAIT_LOOP</a></div><div class="ttdeci">#define RSP_WAIT_LOOP(timeout_ms)</div><div class="ttdoc">Create a loop that waits for some condition that is related to RSP, aborting with a RSP crash after a...</div><div class="ttdef"><b>Definition:</b> rsp.h:515</div></div>
<div class="ttc" id="arsp_8h_html_afb7ef6177f79ef5225e5c9cebaa023c2"><div class="ttname"><a href="rsp_8h.html#afb7ef6177f79ef5225e5c9cebaa023c2">SP_STATUS</a></div><div class="ttdeci">#define SP_STATUS</div><div class="ttdoc">SP status register.</div><div class="ttdef"><b>Definition:</b> rsp.h:175</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_ms</td><td>Allowed timeout in milliseconds. Normally a value like 150 is good enough because it is unlikely that the application should wait for such a long time. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abaaa649a5d63d3a901aa029f18743852" name="abaaa649a5d63d3a901aa029f18743852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaaa649a5d63d3a901aa029f18743852">&#9670;&nbsp;</a></span>rsp_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrsp__ucode__t.html">rsp_ucode_t</a> *&#160;</td>
          <td class="paramname"><em>ucode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a RSP ucode. </p>
<p >This function allows to load a RSP ucode into the RSP internal memory. The function executes the transfer right away, so it is responsibility of the caller making sure that it's a good time to do it.</p>
<p >The function internally keeps a pointer to the last loaded ucode. If the ucode passed is the same, it does nothing. This makes it easier to write code that optimistically switches between different ucodes, but without forcing transfers every time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ucode</td><td>Ucode to load into RSP </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0508fe05f465102e111d6f6ae0598058" name="a0508fe05f465102e111d6f6ae0598058"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0508fe05f465102e111d6f6ae0598058">&#9670;&nbsp;</a></span>rsp_load_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_load_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>imem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of code into RSP IMEM. </p>
<p >This is a lower-level function that actually executes a DMA transfer from RDRAM to IMEM. Prefer using <a class="el" href="rsp_8h.html#abaaa649a5d63d3a901aa029f18743852" title="Load a RSP ucode.">rsp_load</a> instead.</p>
<dl class="section note"><dt>Note</dt><dd>in order for this function to be interoperable with <a class="el" href="rsp_8h.html#abaaa649a5d63d3a901aa029f18743852" title="Load a RSP ucode.">rsp_load</a>, it will reset the last loaded ucode cache.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Pointer to buffer in RDRAM containing code. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the code to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imem_offset</td><td>Byte offset in IMEM where to load the code. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac3b056a6e41df010803e842867700089" name="ac3b056a6e41df010803e842867700089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3b056a6e41df010803e842867700089">&#9670;&nbsp;</a></span>rsp_load_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_load_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dmem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of data into RSP DMEM. </p>
<p >This is a lower-level function that actually executes a DMA transfer from RDRAM to DMEM. Prefer using rsp_load instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to buffer in RDRAM containing data. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the data to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmem_offset</td><td>Offset in DMEM where to load the code. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31d4a6206ad563c4153915037b25401e" name="a31d4a6206ad563c4153915037b25401e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31d4a6206ad563c4153915037b25401e">&#9670;&nbsp;</a></span>rsp_read_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_read_code </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>imem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of code from RSP IMEM to RDRAM. </p>
<p >This is a lower-level function that actually executes a DMA transfer from IMEM to RDRAM.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Pointer to buffer in RDRAM where to write code. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the code to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">imem_offset</td><td>Byte offset in IMEM where where the code will be loaded from. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf9587d4d7fcafe85c672163c24972c0" name="adf9587d4d7fcafe85c672163c24972c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9587d4d7fcafe85c672163c24972c0">&#9670;&nbsp;</a></span>rsp_read_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_read_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dmem_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a DMA transfer to load a piece of data from RSP DMEM to RDRAM. </p>
<p >This is a lower-level function that actually executes a DMA transfer from DMEM to RDRAM.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to buffer in RDRAM where to write data. Must be aligned to 8 bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of the data to load. Must be a multiple of 8. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmem_offset</td><td>Byte offset in IMEM where where the data will be loaded from. Must be a multiple of 8. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9b06ba89506266ccb7c962872f0c783b" name="a9b06ba89506266ccb7c962872f0c783b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b06ba89506266ccb7c962872f0c783b">&#9670;&nbsp;</a></span>rsp_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run RSP ucode. </p>
<p >This function starts running the RSP, and wait until the ucode is finished. </p>

</div>
</div>
<a id="a896f4959706e9ecb62ecf2de43bcb276" name="a896f4959706e9ecb62ecf2de43bcb276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a896f4959706e9ecb62ecf2de43bcb276">&#9670;&nbsp;</a></span>rsp_run_async()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_run_async </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run RSP async. </p>
<p >This function starts running the RSP in background. Use <a class="el" href="rsp_8h.html#a5d8697b67857ad9bd55885c0eb79c984" title="Wait until RSP has finished processing.">rsp_wait()</a> to synchronize later. </p>

</div>
</div>
<a id="a5d8697b67857ad9bd55885c0eb79c984" name="a5d8697b67857ad9bd55885c0eb79c984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d8697b67857ad9bd55885c0eb79c984">&#9670;&nbsp;</a></span>rsp_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rsp_wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait until RSP has finished processing. </p>
<p >This function will wait until the RSP is halted. It contains a fixed timeout of 500 ms, after which <a class="el" href="rsp_8h.html#ae79047e3c1b28e7ed6b5e71025bcd1bb" title="Abort the program showing a RSP crash screen.">rsp_crash</a> is invoked to abort the program. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 7 2022 08:55:10 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
